<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <title>‚öΩ Football Tapper</title>
    <style>
        * { box-sizing: border-box; margin: 0; padding: 0; }
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: linear-gradient(135deg, var(--tg-theme-bg-color), #1a1a2e);
            color: var(--tg-theme-text-color);
            min-height: 100vh;
            overflow: hidden;
            user-select: none;
        }
        .container { max-width: 400px; margin: 0 auto; padding: 20px; text-align: center; }
        
        .header {
            background: rgba(0,0,0,0.7); 
            padding: 15px; 
            border-radius: 20px; 
            margin-bottom: 20px;
        }
        h1 { font-size: 28px; margin: 0; text-shadow: 2px 2px 4px rgba(0,0,0,0.5); }
        
        #score { 
            font-size: 48px; 
            font-weight: bold; 
            margin: 20px 0; 
            text-shadow: 3px 3px 6px rgba(0,0,0,0.5);
            background: rgba(255,255,255,0.1);
            padding: 20px;
            border-radius: 20px;
        }
        
        #football { 
            width: 220px; height: 220px; 
            cursor: pointer; 
            transition: all 0.15s ease;
            border-radius: 50%;
            border: 8px solid #fff;
            box-shadow: 0 20px 40px rgba(0,0,0,0.5);
            margin: 20px auto;
            position: relative;
        }
        #football:active { transform: scale(0.92) rotate(10deg); }
        #football::after {
            content: '‚öΩ'; font-size: 120px; 
            position: absolute; top: 50%; left: 50%;
            transform: translate(-50%, -50%);
        }
        
        .upgrades {
            display: grid; 
            grid-template-columns: 1fr 1fr; 
            gap: 15px; 
            margin: 20px 0;
        }
        .upgrade-btn {
            background: linear-gradient(45deg, var(--tg-theme-button-color), #ffd700);
            color: #000; 
            border: none; 
            padding: 15px; 
            border-radius: 15px; 
            font-size: 16px; 
            font-weight: bold;
            cursor: pointer;
            transition: all 0.2s;
        }
        .upgrade-btn:hover { transform: scale(1.05); }
        .upgrade-btn:disabled { 
            background: #666; 
            cursor: not-allowed; 
            transform: none;
        }
        .upgrade-btn:not(:disabled)::after {
            content: 'üí∞'; margin-left: 8px;
        }
        
        .passive { 
            background: rgba(0,255,0,0.2); 
            padding: 10px; 
            border-radius: 10px; 
            margin: 10px 0;
            font-size: 18px;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>‚öΩ Football Tapper</h1>
            <div id="userInfo">–ó–∞–≥—Ä—É–∑–∫–∞...</div>
        </div>
        
        <div id="score">–ì–æ–ª—ã: 0</div>
        
        <div id="football" title="–¢–∞–ø–∞–π –ø–æ –º—è—á—É!"></div>
        
        <div class="passive" id="passive">–ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥: 0/—Å–µ–∫</div>
        
        <div class="upgrades">
            <button class="upgrade-btn" id="messiBtn" onclick="buyUpgrade('messi')">
                –ú–µ—Å—Å–∏ x2
            </button>
            <button class="upgrade-btn" id="ronaldoBtn" onclick="buyUpgrade('ronaldo')">
                –†–æ–Ω–∞–ª–¥—É x3
            </button>
            <button class="upgrade-btn" id="stadiumBtn" onclick="buyUpgrade('stadium')">
                –°—Ç–∞–¥–∏–æ–Ω
            </button>
            <button class="upgrade-btn" id="teamBtn" onclick="buyUpgrade('team')">
                –ö–æ–º–∞–Ω–¥–∞
            </button>
        </div>
    </div>

    <script>
        const tg = window.Telegram.WebApp;
        tg.expand();
        tg.requestViewport();
        tg.enableClosingByOutsideClick = false;
        
        // –ò–≥—Ä–æ–≤—ã–µ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ
        let gameData = {
            score: 0,
            clickPower: 1,
            passiveIncome: 0,
            upgrades: { messi: 0, ronaldo: 0, stadium: 0, team: 0 },
            lastUpdate: Date.now()
        };
        
        // –≠–ª–µ–º–µ–Ω—Ç—ã UI
        const scoreEl = document.getElementById('score');
        const passiveEl = document.getElementById('passive');
        const footballEl = document.getElementById('football');
        const userInfoEl = document.getElementById('userInfo');
        
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
        function init() {
            if (tg.initDataUnsafe.user) {
                userInfoEl.textContent = `–ò–≥—Ä–æ–∫: ${tg.initDataUnsafe.user.first_name || '–ì–æ—Å—Ç—å'}`;
            }
            loadGameData();
            updateUI();
            gameLoop();
        }
        
        // –ö–ª–∏–∫ –ø–æ –º—è—á—É
        footballEl.onclick = () => {
            gameData.score += gameData.clickPower;
            tg.HapticFeedback.impactOccurred('medium');
            updateUI();
            saveGameData();
        };
        
        // –ü–æ–∫—É–ø–∫–∞ –∞–ø–≥—Ä–µ–π–¥–æ–≤
        function buyUpgrade(type) {
            const upgrades = {
                messi: { cost: 50, power: 1, max: 10 },
                ronaldo: { cost: 200, power: 2, max: 5 },
                stadium: { cost: 500, passive: 1, max: 3 },
                team: { cost: 1000, passive: 3, max: 2 }
            };
            
            const upgrade = upgrades[type];
            if (gameData.score >= upgrade.cost && 
                gameData.upgrades[type] < upgrade.max) {
                
                gameData.score -= upgrade.cost;
                gameData.upgrades[type]++;
                
                if (upgrade.power) gameData.clickPower += upgrade.power;
                if (upgrade.passive) gameData.passiveIncome += upgrade.passive;
                
                tg.HapticFeedback.notificationOccurred('success');
                tg.showAlert(`–ö—É–ø–ª–µ–Ω ${type === 'messi' ? '–ú–µ—Å—Å–∏' : 
                                     type === 'ronaldo' ? '–†–æ–Ω–∞–ª–¥—É' :
                                     type === 'stadium' ? '–°—Ç–∞–¥–∏–æ–Ω' : '–ö–æ–º–∞–Ω–¥–∞'}!`);
                
                updateUI();
                saveGameData();
            }
        }
        
        // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ UI
        function updateUI() {
            scoreEl.textContent = `–ì–æ–ª—ã: ${Math.floor(gameData.score)}`;
            passiveEl.textContent = `–ü–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥: ${gameData.passiveIncome}/—Å–µ–∫`;
            
            // –û–±–Ω–æ–≤–ª—è–µ–º –∫–Ω–æ–ø–∫–∏
            ['messi', 'ronaldo', 'stadium', 'team'].forEach(type => {
                const btn = document.getElementById(type + 'Btn');
                const upgrade = {
                    messi: { cost: 50 * Math.pow(1.5, gameData.upgrades.messi) },
                    ronaldo: { cost: 200 * Math.pow(1.5, gameData.upgrades.ronaldo) },
                    stadium: { cost: 500 * Math.pow(2, gameData.upgrades.stadium) },
                    team: { cost: 1000 * Math.pow(2, gameData.upgrades.team) }
                }[type];
                
                const maxed = gameData.upgrades[type] >= ({messi:10,ronaldo:5,stadium:3,team:2})[type];
                btn.textContent = maxed ? `${type.toUpperCase()} MAX` : 
                                `${type.charAt(0).toUpperCase() + type.slice(1)} x${gameData.upgrades[type]+1}`;
                btn.disabled = gameData.score < upgrade.cost || maxed;
            });
        }
        
        // –ò–≥—Ä–æ–≤–æ–π —Ü–∏–∫–ª (–ø–∞—Å—Å–∏–≤–Ω—ã–π –¥–æ—Ö–æ–¥)
        function gameLoop() {
            const now = Date.now();
            const delta = (now - gameData.lastUpdate) / 1000;
            gameData.score += gameData.passiveIncome * delta;
            gameData.lastUpdate = now;
            updateUI();
            requestAnimationFrame(gameLoop);
        }
        
        // LocalStorage (–≤—Ä–µ–º–µ–Ω–Ω–æ)
        function saveGameData() { localStorage.setItem('footballTapper', JSON.stringify(gameData)); }
        function loadGameData() { 
            const saved = localStorage.getItem('footballTapper');
            if (saved) gameData = { ...gameData, ...JSON.parse(saved) };
        }
        
        init();
    </script>
</body>
</html>
